<!-- Main page templates -->
<template id="instructions-template">
    <div id="instructionsBox" class="textBox">
        <p class="larger"><strong>Image Classification</strong></p>
        <ul>
            <li>Upload images via drag-and-drop or click to browse (supports multiple images)</li>
            <li>View prediction results with confidence scores</li>
            <li>Generate and review GradCAM visualizations for model explainability</li>
            <li>Navigate between multiple predictions using Prev/Next buttons</li>
            <li>Download GradCAM images for offline review</li>
        </ul>
        <p>*Invalid images will be automatically detected and discarded from the display*</p>
        
        <p class="larger"><strong>Database Management</strong></p>
        <ul>
            <li>Save predictions to the database with reviewer notes</li>
            <li>Mark predictions as Open, Reviewed, or Flagged for quality control</li>
            <li>Add annotations for difficult cases or non-discriminative GradCAM results</li>
            <li>View all saved predictions via the Database tab</li>
            <li>Edit or delete existing database records</li>
        </ul>
        
        <p class="larger"><strong>Model Management</strong></p>
        <ul>
            <li>View currently loaded model via Settings menu</li>
            <li>Replace model by uploading a new .keras file</li>
            <li>Model reloads automatically in the background</li>
        </ul>
        
        <p class="larger"><strong>Input Constraints</strong></p>
        <ul>
            <li><strong>Images:</strong> Preprocessed <strong>.jpg, .jpeg,</strong> or <strong>.png</strong> formats only | Valid dimensions: <strong>350x410 px</strong> | Max 10 MB per file</li>
            <li><strong>Models:</strong> Compressed <strong>.keras</strong> format only | Max 500 MB</li>
            <li><strong>Database fields:</strong> Reviewer (max 50 chars) | Annotation (max 500 chars)</li>
        </ul>
    </div>
</template>

<template id="database-template">
    <div id="tableContainer">
        <table class="db-table">
            <thead>
                <tr>
                    <th style="width: 45px;">pID</th>
                    <th style="width: 120px;">Date of prediction</th>
                    <th style="width: 100px;">Predicted class</th>
                    <th style="width: 110px;">Confidence</th>
                    <th style="width: 110px;">Reviewer</th>
                    <th style="width: 110px;">Status</th>
                    <th class="annotation-col">Annotation</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</template>

<template id="about-template">
    <div id="descriptionBox" class="textBox"><p><strong>*Place for project description if needed*</strong></p></div>
</template>

<template id="imgBtn-template">
    <div id="imgBtns" class="btnContainer">
        <button type="button" id="prevBtn" data-action="prev" disabled>Prev</button>
        <button type="button" id="nextBtn" data-action="next" disabled>Next</button>
    </div>
    <div id="gradcamBtns" class="btnContainer">
        <button type="button" id="saveBtn" data-action="openDbPop" disabled> Save to DB <i class="fa-solid fa-database"></i></button>
        <button type="button" id="downloadBtn" data-action="download" disabled> Download <i class="fa-solid fa-download"></i></button>
    </div>
</template>

<!-- Popups -->
<template id="settings-popup-template">
    <div id="settings-popup" class="popup">
        <div class="popup-item">
            <strong>Current model: </strong> <span data-field="modelName"></span>
        </div>
        <div class="popup-item">
            <div id="modelBtnContainer" class="centerFlex">
                <button type="button" id="changeModelBtn" data-action="pickModel">Pick new model</button>
                <form id="modelReloadForm" action="/" method="post" enctype="multipart/form-data" style="display:none;">
                    <input type="file" id="modelFileInput" accept=".keras">
                </form>
            </div>
        </div>
    </div>
</template>

<template id="data-popup-template">
    <div id="data-popup" class="popup">
        <span class="popup-close" data-action="close">&times;</span>
        <div class="popup-item">
            <form class="form-container">
                <div class="param-grid">
                    <div class="param">
                        <span class="label">pID:</span><span data-field="pID"></span>
                    </div>

                    <div class="param">
                        <span class="label">Reviewer:</span><textarea id="reviewer" placeholder="Name" data-field="reviewer"></textarea>
                    </div>

                    <div class="param">
                        <span class="label">Confidence:</span><span data-field="confidence"></span>
                    </div>

                    <div class="param">
                        <span class="label">Predicted class:</span><span data-field="predicted_class"></span>
                    </div>
                </div>
                <div class="param">
                    <span class="label">Status:</span>
                    <select class="status-select" data-field="status">
                        <option value="Open">Open</option>
                        <option value="Reviewed">Reviewed</option>
                        <option value="Flagged">Flagged</option>
                    </select>
                </div>
                <textarea id="annotation" placeholder="Annotations..." data-field="annotation"></textarea>
            </form>
        </div>
        <div class="popup-item">
            <div id="popupBtns" class="btnContainer">
                <button id="popupSaveBtn" type="button" data-id="" data-action="save">Save</button>
                <button id="popupDeleteBtn" type="button" data-id="" data-action="delete" hidden>Delete</button>
            </div>
        </div>
    </div>
</template>